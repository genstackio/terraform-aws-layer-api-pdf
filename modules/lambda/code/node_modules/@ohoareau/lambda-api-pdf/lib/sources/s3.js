"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const aws_1 = require("@ohoareau/aws");
async function s3(ctx) {
    var _a;
    let { bucket, name } = ctx.query;
    const bucketName = (((_a = ctx.config) === null || _a === void 0 ? void 0 : _a.buckets) || {})[bucket];
    if (!bucketName)
        return undefined;
    if ('function' === typeof bucketName) {
    }
    return {
        definition: await aws_1.s3.fromJsonFile(bucketName, `${name}.json`),
    };
}
exports.s3 = s3;
exports.default = s3;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiczMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc291cmNlcy9zMy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHVDQUEwQztBQUluQyxLQUFLLFVBQVUsRUFBRSxDQUFDLEdBQVE7O0lBQzdCLElBQUksRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQztJQUMvQixNQUFNLFVBQVUsR0FBRyxDQUFDLE9BQUEsR0FBRyxDQUFDLE1BQU0sMENBQUUsT0FBTyxLQUFJLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3ZELElBQUksQ0FBQyxVQUFVO1FBQUUsT0FBTyxTQUFTLENBQUM7SUFDbEMsSUFBSSxVQUFVLEtBQUssT0FBTyxVQUFVLEVBQUU7S0FFckM7SUFDRCxPQUFPO1FBQ0gsVUFBVSxFQUFFLE1BQU0sUUFBSyxDQUFDLFlBQVksQ0FBQyxVQUFVLEVBQUUsR0FBRyxJQUFJLE9BQU8sQ0FBQztLQUNuRSxDQUFDO0FBQ04sQ0FBQztBQVZELGdCQVVDO0FBRUQsa0JBQWUsRUFBRSxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtzMyBhcyBhd3NzM30gZnJvbSAnQG9ob2FyZWF1L2F3cyc7XG5pbXBvcnQge2N0eH0gZnJvbSAnQG9ob2FyZWF1L2xhbWJkYS11dGlscyc7XG5pbXBvcnQge2RvY3VtZW50X2RlZmluaXRpb259IGZyb20gXCJAb2hvYXJlYXUvcmVhY3QtZG9jdW1lbnQtcmVuZGVyZXJcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHMzKGN0eDogY3R4KTogUHJvbWlzZTx7ZGVmaW5pdGlvbjogZG9jdW1lbnRfZGVmaW5pdGlvbn18dW5kZWZpbmVkPiB7XG4gICAgbGV0IHtidWNrZXQsIG5hbWV9ID0gY3R4LnF1ZXJ5O1xuICAgIGNvbnN0IGJ1Y2tldE5hbWUgPSAoY3R4LmNvbmZpZz8uYnVja2V0cyB8fCB7fSlbYnVja2V0XTtcbiAgICBpZiAoIWJ1Y2tldE5hbWUpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgaWYgKCdmdW5jdGlvbicgPT09IHR5cGVvZiBidWNrZXROYW1lKSB7XG5cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZGVmaW5pdGlvbjogYXdhaXQgYXdzczMuZnJvbUpzb25GaWxlKGJ1Y2tldE5hbWUsIGAke25hbWV9Lmpzb25gKSxcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBzMyJdfQ==